{"ast":null,"code":"var _jsxFileName = \"/home/tomas/Voting app/voting-app/client/src/components/verifyVote/verifyVote.js\";\n\n/* eslint-disable react/no-direct-mutation-state */\nimport React, { Component } from 'react';\nimport FileReader from '../fileReader/fileReader';\nimport { NotificationManager } from 'react-notifications';\nimport axios from 'axios';\n/*\nconst { rEncrypt } = require('paillier-in-set-zkp');\nconst paillier = require('paillier-js');\n*/\n\nclass VerifyVote extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleForce = data => {\n      if (!isNaN(data[0][0]) && !isNaN(data[1][0])) {\n        this.state.id = data[0][0];\n        this.state.random = data[1][0];\n        console.log(data[0][0]);\n        console.log(data[1][0]);\n        axios.get('/voting-app/getVote', {\n          params: {\n            ID: this.state.id\n          }\n        }).then(response => {\n          this.setState({\n            Vote: response.data.Vote\n          });\n          console.log('Vote:' + this.state.Vote); //const newVote = rEncrypt();\n\n          /*this.setState({isFinish: true});\n          this.state.isFinish = true;\n          NotificationManager.success('Your vote is counted :-)', 'SUCCESS!');*/\n        }).catch(function (error) {\n          console.log(error);\n        }).then(function () {// always executed\n        });\n      } else {\n        NotificationManager.error('Your is is not correct :-(', 'ERROR!');\n        return;\n      }\n    };\n\n    this.state = {\n      pubKey: [],\n      candidates: [],\n      bits: undefined,\n      id: undefined,\n      random: undefined,\n      Vote: undefined\n    };\n  }\n\n  componentDidMount() {\n    fetch('/voting-app/candidates/', {\n      method: \"GET\"\n    }).then(res => res.json()).then(candidates => this.setState({\n      candidates\n    }, () => console.log('Candidates fetched..', candidates)));\n    fetch('/voting-app/getPubKey/', {\n      method: \"GET\"\n    }).then(res => res.json()).then(pubKey => this.setState({\n      pubKey\n    }, () => console.log('Public Key fetched..', pubKey)));\n    fetch('/voting-app/getBits/', {\n      method: \"GET\"\n    }).then(res => res.json()).then(bits => this.setState({\n      bits\n    }, () => console.log('Number of bits fetched..', bits)));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(FileReader, {\n      onFileLoaded: this.handleForce,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default VerifyVote;","map":{"version":3,"sources":["/home/tomas/Voting app/voting-app/client/src/components/verifyVote/verifyVote.js"],"names":["React","Component","FileReader","NotificationManager","axios","VerifyVote","constructor","props","handleForce","data","isNaN","state","id","random","console","log","get","params","ID","then","response","setState","Vote","catch","error","pubKey","candidates","bits","undefined","componentDidMount","fetch","method","res","json","render"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-direct-mutation-state */\nimport React, {Component} from 'react';\nimport FileReader from '../fileReader/fileReader';\nimport { NotificationManager } from 'react-notifications';\nimport axios from 'axios';\n/*\nconst { rEncrypt } = require('paillier-in-set-zkp');\nconst paillier = require('paillier-js');\n*/\nclass VerifyVote extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            pubKey: [],\n            candidates: [],\n            bits: undefined,\n            id: undefined,\n            random: undefined,\n            Vote: undefined,\n        }\n    }\n\n    componentDidMount() {\n        fetch('/voting-app/candidates/',{\n            method: \"GET\"})\n            .then(res => res.json())\n            .then(candidates => this.setState({candidates}, () => console.log('Candidates fetched..',\n            candidates)));\n        fetch('/voting-app/getPubKey/',{\n            method: \"GET\"})\n            .then(res => res.json())\n            .then(pubKey => this.setState({pubKey}, () => console.log('Public Key fetched..',\n            pubKey)));\n        fetch('/voting-app/getBits/',{\n            method: \"GET\"})\n            .then(res => res.json())\n            .then(bits => this.setState({bits}, () => console.log('Number of bits fetched..',\n            bits)));\n    }\n\n    handleForce = data => {\n        if(!isNaN(data[0][0]) && !isNaN(data[1][0])){\n            this.state.id = data[0][0];\n            this.state.random = data[1][0];\n            console.log(data[0][0]);\n            console.log(data[1][0]);\n            axios.get('/voting-app/getVote', {\n                params: {\n                  ID: this.state.id\n                }\n              })\n              .then(response => {\n                this.setState({ Vote: response.data.Vote });\n                console.log('Vote:' + this.state.Vote);\n\n                //const newVote = rEncrypt();\n                /*this.setState({isFinish: true});\n                this.state.isFinish = true;\n                NotificationManager.success('Your vote is counted :-)', 'SUCCESS!');*/\n            })\n              .catch(function (error) {\n                console.log(error);\n              })\n              .then(function () {\n                // always executed\n              }); \n        }\n        else{\n            NotificationManager.error('Your is is not correct :-(', 'ERROR!');\n            return;\n        }\n    };\n\n    render(){\n        return(\n            <div>\n                <FileReader onFileLoaded={this.handleForce}/>\n            </div>\n        );\n    }\n}\nexport default VerifyVote;"]},"metadata":{},"sourceType":"module"}